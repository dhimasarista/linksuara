CREATE TABLE users (
  id INT PRIMARY KEY,
  username VARCHAR(255),
  password VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL
);

CREATE TABLE dapil (
  id INT PRIMARY KEY,
  nama VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL
);

CREATE TABLE kecamatan (
  id INT PRIMARY KEY,
  nama VARCHAR(255),
  dapil_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,
  FOREIGN KEY (dapil_id) REFERENCES dapil(id)
);

CREATE TABLE kelurahan (
  id INT PRIMARY KEY,
  nama VARCHAR(255),
  kecamatan_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,
  FOREIGN KEY (kecamatan_id) REFERENCES kecamatan(id)
);

CREATE TABLE tps (
  id INT PRIMARY KEY,
  nama VARCHAR(255),
  kelurahan_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,
  FOREIGN KEY (kelurahan_id) REFERENCES kelurahan(id)
);

CREATE TABLE caleg (
  id INT PRIMARY KEY,
  nama VARCHAR(255),
  dapil_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,
  FOREIGN KEY (dapil_id) REFERENCES dapil(id)
);

CREATE TABLE jumlah_suara (
  id INT PRIMARY KEY,
  jumlah INT,
  foto LONGBLOB,
  keterangan VARCHAR(255),
  tps_id INT,
  caleg_id INT,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at TIMESTAMP NULL,
  FOREIGN KEY (tps_id) REFERENCES tps(id),
  FOREIGN KEY (caleg_id) REFERENCES caleg(id)
);
